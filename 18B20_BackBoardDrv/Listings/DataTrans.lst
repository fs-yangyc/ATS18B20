C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE DATATRANS
OBJECT MODULE PLACED IN .\Objects\DataTrans.obj
COMPILER INVOKED BY: D:\Software\Keil\C51\BIN\C51.EXE DataTrans.c LARGE OPTIMIZE(4,SPEED) BROWSE DEBUG OBJECTEXTEND CODE
                    - PRINT(.\Listings\DataTrans.lst) TABS(2) OBJECT(.\Objects\DataTrans.obj)

line level    source

   1          #include <DataTrans.h>
   2          #include <DelayTime.h>
   3          #include <pc.h>
   4          #include <stdio.h>
   5          #include <string.h>
   6          
   7          extern char nBoardIsHerePwr[8];   // 来源于 “TstBrdContrl.c”
   8            
   9          char xdata nRecieveData[200],nSendData[20],nTempP6PortData,nDeviceIndex,nRxDataCunt;
  10          char nOtherDeviceName[8] = {E3631A,CFG,YSL_CHAMBER,GWS_CHAMBER,RS485_1,RS485_2,RS485_3,RS232_1};
  11          char nTestBoardName[8] = {TSTBRD_1,TSTBRD_2,TSTBRD_3,TSTBRD_4,TSTBRD_5,TSTBRD_6,TSTBRD_7,TSTBRD_8};
  12          unsigned int nComTimeOutCunt; // 记录串口超时
  13          
  14          extern unsigned char Version;
  15          
  16          /**
  17          *** 函数名称 ： UsartInit
  18          *** 函数功能 ： 初始化串口到指定的波特率
  19          *** 入口参数 ： 1、nBtr 波特率
  20          *** 返回值   ： 无
  21          */
  22          void UsartInit(char nComPortIndex,char nBtr)
  23          { 
  24   1        if(nComPortIndex == ComPort_1){ // COM1
  25   2          SCON = 0x50;    //8位数据,可变波特率
  26   2          AUXR |= 0x40;   //定时器1时钟为Fosc,即1T
  27   2          AUXR &= 0xfe;   //串口1选择定时器1为波特率发生器
  28   2          TMOD &= 0x0f;   //设定定时器1为16位自动重装方式
  29   2        
  30   2          if(nBtr == BTR115200){TL1 = 0xd0;TH1 = 0xff;}
  31   2          if(nBtr == BTR57600) {TL1 = 0xa0;TH1 = 0xff;}
  32   2          if(nBtr == BTR38400) {TL1 = 0x70;TH1 = 0xff;}
  33   2          if(nBtr == BTR19200) {TL1 = 0xe0;TH1 = 0xfe;}
  34   2          if(nBtr == BTR9600)  {TL1 = 0xc0;TH1 = 0xfd;}
  35   2          if(nBtr == BTR4800)  {TL1 = 0x80;TH1 = 0xfb;}
  36   2          if(nBtr == BTR2400)  {TL1 = 0x00;TH1 = 0xf7;}
  37   2          if(nBtr == BTR1200)  {TL1 = 0x00;TH1 = 0xee;}
  38   2        
  39   2          ET1 = 0;      //禁止定时器1中断
  40   2          TR1 = 1;      //启动定时器1
  41   2        }
  42   1        
  43   1        if(nComPortIndex == ComPort_2){ // COM2
  44   2          S2CON = 0x50;
  45   2          if(nBtr == BTR115200){T2L = 0xd0;T2H = 0xff;}
  46   2          if(nBtr == BTR57600) {T2L = 0xa0;T2H = 0xff;}
  47   2          if(nBtr == BTR38400) {T2L = 0x70;T2H = 0xff;}
  48   2          if(nBtr == BTR19200) {T2L = 0xe0;T2H = 0xfe;}
  49   2          if(nBtr == BTR9600)  {T2L = 0xc0;T2H = 0xfd;}
  50   2          if(nBtr == BTR4800)  {T2L = 0x80;T2H = 0xfb;}
  51   2          if(nBtr == BTR2400)  {T2L = 0x00;T2H = 0xf7;}
  52   2          if(nBtr == BTR1200)  {T2L = 0x00;T2H = 0xee;}
  53   2        
  54   2          AUXR |= 0x14; // 这里不能直接赋值0x14，否者串口1会停止工作
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 2   

  55   2        }
  56   1      }
  57          
  58          /**
  59          *** 函数名称 ： UsartInterrupt
  60          *** 函数功能 ： 使能或者关闭串口中断
  61          *** 入口参数 ： 1、nEnbDisable 使能或者关闭
  62          *** 返回值   ： 无
  63          */
  64          void UsartInterrupt(char nComPortIndex,char nEnbDisable)
  65          {
  66   1        if(nComPortIndex == ComPort_1){
  67   2          if(nEnbDisable == COMENB){
  68   3            ES = 0x01;      // Enable Com1
  69   3          }
  70   2          
  71   2          else{
  72   3            ES = 0x00;      // Disable Com1
  73   3          }
  74   2        }
  75   1        
  76   1        if(nComPortIndex == ComPort_2){
  77   2          if(nEnbDisable == COMENB){
  78   3            IE2 |= 0x01;  // Enable Com2
  79   3          }
  80   2          
  81   2          else{
  82   3            IE2 &= 0xfe;  // Disable Com2
  83   3          }
  84   2        }
  85   1      }
  86          
  87          /**
  88          *** 函数名称 ： SetUartPosionAndBtr
  89          *** 函数功能 ： 改变串口的位置和波特率
  90          *** 入口参数 ： 1、nSerialPortPosion 串口映射的引脚位置
  91          ***             2、nDeviceName 与串口通信的设备名称
  92          ***             3、nBtr 波特率
  93          *** 返回值   ： 无
  94          */
  95          void SetUsartTwoPosionAndBtr(char nSerialPortPosion,char nDeviceName,char nBtr)
  96          { 
  97   1        UsartInit(ComPort_2,nBtr);
  98   1        nTempP6PortData = P6;       // 读取P6端口的状态
  99   1          
 100   1        if(nSerialPortPosion == Com2_Other){ // 与巡检仪、温箱、E3631A等通信
 101   2          P_SW2 |= 0x01;
 102   2            
 103   2          nTempP6PortData &= 0x1f;  // 清零P6端口的高三位：P6.5 P6.6 P6.7
 104   2          for(nDeviceIndex = 0; nDeviceIndex < 8; nDeviceIndex++){
 105   3            if(nOtherDeviceName[nDeviceIndex] == nDeviceName){
 106   4              nTempP6PortData |= nOtherDeviceName[nDeviceIndex];
 107   4              break;
 108   4            }
 109   3          }
 110   2        }
 111   1        
 112   1        if(nSerialPortPosion == Com2_TstBrd){ // 与测试板通信
 113   2          P_SW2 &= 0xfe;
 114   2            
 115   2          nTempP6PortData &= 0xf8;  // 清零P6端口的低三位：P6.0 P6.1 P6.2
 116   2          for(nDeviceIndex = 0; nDeviceIndex < 8; nDeviceIndex++){
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 3   

 117   3            if(nTestBoardName[nDeviceIndex] == nDeviceName){
 118   4              nTempP6PortData |= nTestBoardName[nDeviceIndex];
 119   4              break;
 120   4            }
 121   3          }
 122   2        }
 123   1          
 124   1        P6 = nTempP6PortData; // 设置P6端口的状态
 125   1        Delay_MS(1);
 126   1      }
 127          
 128          /**
 129          *** 函数名称 ： SendStringData
 130          *** 函数功能 ： 以ASCII码的形式发送字符串
 131          *** 入口参数 ： 1、*pData指向待发送的数组
 132          *** 返回值   ： 无
 133          */
 134          void SendStringData(char nComPortIndex,char *pData)
 135          {
 136   1        if(nComPortIndex == ComPort_1){ // COM1
 137   2          while(*pData){
 138   3            SBUF = *pData++;
 139   3            while(TI != 1);
 140   3            TI = 0;
 141   3          }
 142   2        }
 143   1        
 144   1        if(nComPortIndex == ComPort_2){ // COM2
 145   2          while(*pData){
 146   3            S2BUF = *pData++;
 147   3            while((S2CON & 0x02) != 0x02);  // S2TI == 1
 148   3            S2CON &= 0xfd;          // S2TI = 0
 149   3          }
 150   2        }
 151   1      }
 152          
 153          /**
 154          *** 函数名称 ： SendFloatData
 155          *** 函数功能 ： 发送浮点型数
 156          *** 入口参数 ： 1、*pFloatData指向待发送的浮点型数组
 157          ***             2、nFloatDataCunt 待发送的浮点型数的个数
 158          *** 返回值   ： 无
 159          */
 160          void SendFloatData(char nComPortIndex,float *pFloatData,unsigned int nFloatDataCunt)
 161          {
 162   1        unsigned int nCunt = 0;
 163   1        char *pData;
 164   1        
 165   1        for(nCunt = 0; nCunt < nFloatDataCunt; nCunt++){
 166   2          sprintf(nSendData,"%f\t",pFloatData[nCunt]);
 167   2          pData = nSendData;
 168   2          
 169   2          SendStringData(nComPortIndex,pData);
 170   2        }
 171   1      }
 172          
 173          /**
 174          *** 函数名称 ： SendIntData
 175          *** 函数功能 ： 发送整型数
 176          *** 入口参数 ： 1、*pIntData指向待发送的整型数组
 177          ***             2、nIntDataCunt 待发送的整型数的个数
 178          *** 返回值   ： 无
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 4   

 179          */
 180          void SendIntData(char nComPortIndex,int *pIntData,unsigned int nIntDataCunt)
 181          {
 182   1        unsigned int nCunt = 0;
 183   1        char *pData;
 184   1        
 185   1        for(nCunt = 0; nCunt < nIntDataCunt; nCunt++){
 186   2          sprintf(nSendData,"%d\t",pIntData[nCunt]);
 187   2          pData = nSendData;
 188   2          
 189   2          SendStringData(nComPortIndex,pData);
 190   2        }
 191   1      }
 192          void SendIntDataSelect(char nComPortIndex,int *pIntData,unsigned int nStartDataCunt,unsigned int nStopData
             -Cunt)
 193          {
 194   1        unsigned int nCunt = 0;
 195   1        char *pData;
 196   1        
 197   1        for(nCunt = nStartDataCunt; nCunt < nStopDataCunt; nCunt++){
 198   2          sprintf(nSendData,"%d\t",pIntData[nCunt]);
 199   2          pData = nSendData;
 200   2          
 201   2          SendStringData(nComPortIndex,pData);
 202   2        }
 203   1      }
 204          
 205          /**
 206          *** 函数名称 ： SendData
 207          *** 函数功能 ： 以十六进制的形式发送字符串
 208          *** 入口参数 ： 1、*pData指向待发送的数组
 209          ***             2、nIntDataCunt 待发送的数据的个数
 210          *** 返回值   ： 无
 211          */
 212          
 213          void SendData(char nComPortIndex,unsigned char *pData,unsigned int nIntDataCunt)
 214          {
 215   1        unsigned int nCunt = 0;
 216   1        for(nCunt = 0; nCunt < nIntDataCunt; nCunt++){
 217   2          if(nComPortIndex == ComPort_1){
 218   3            SBUF = pData[nCunt];
 219   3            while(TI != 1);
 220   3            TI = 0;
 221   3          }
 222   2          
 223   2          if(nComPortIndex == ComPort_2){
 224   3            S2BUF = pData[nCunt];
 225   3            while((S2CON & 0x02) != 0x02);  // S2TI == 1
 226   3            S2CON &= 0xfd;          // S2TI = 0
 227   3          }
 228   2        }
 229   1      }
 230          
 231          /**
 232          *** 函数名称 ： SendTC18B20PackageTypeToBoard
 233          *** 函数功能 ： 送芯片的封装形式给修调读温板
 234          *** 入口参数 ： 1、nTrimingBoardIndex 校准板编号：1~8
 235          ***             2、nPkgType 封装形式
 236          *** 返回值   ： 无
 237          */
 238          
 239          void SendTC18B20PackageTypeToBoard(char nTrimingBoardIndex,char nPkgType)
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 5   

 240          {
 241   1        char nPkgData[20];
 242   1      
 243   1        memset(nPkgData,'\0',sizeof(nPkgData));
 244   1        sprintf(nPkgData,"PKG,%d@",(int)nPkgType);
 245   1        for(nDeviceIndex = 0; nDeviceIndex < 8; nDeviceIndex++){
 246   2          if(nTrimingBoardIndex & nBoardIsHerePwr[nDeviceIndex]){
 247   3            SetUsartTwoPosionAndBtr(Com2_TstBrd,nTestBoardName[nDeviceIndex],BTR115200);
 248   3            SendStringData(ComPort_2,nPkgData);
 249   3          }
 250   2        }
 251   1      }
 252          
 253          /**
 254          *** 函数名称 ： WaitForTrimingProcess
 255          *** 函数功能 ： 等待Triming Board修调命令执行完成
 256          *** 入口参数 ： nTrimingBoardIndex 修调板是否存在
 257          *** 返回值   ： 无
 258          */
 259          
 260          void WaitForTrimingProcess(char nTrimingBoardIndex)
 261          {
 262   1        for(nDeviceIndex = 0; nDeviceIndex < 8; nDeviceIndex++){
 263   2          if(nTrimingBoardIndex & nBoardIsHerePwr[nDeviceIndex]){
 264   3            SetUsartTwoPosionAndBtr(Com2_TstBrd,nTestBoardName[nDeviceIndex],BTR115200);
 265   3            S2CON &= 0xfe;
 266   3            while(1){
 267   4              S2BUF = '%';
 268   4              while((S2CON & 0x02) != 0x02);  // S2TI == 1
 269   4              S2CON &= 0xfd;          // S2TI = 0
 270   4              
 271   4              if(S2CON & 0x01){
 272   5                S2CON &= 0xfe;
 273   5                if('%' == S2BUF)
 274   5                break;
 275   5              }
 276   4            }
 277   3          }
 278   2        }
 279   1      }
 280          
 281          /**
 282          *** 函数名称 ： ReadTemperatureDataFromTrimingBoard
 283          *** 函数功能 ： 从校准板读取温度数据
 284          *** 入口参数 ： 1、nTrimingBoardIndex 校准板编号：1~8
 285          ***             2、pData 温度数据，共48个
 286          *** 返回值   ： 无
 287          */
 288          
 289          void ReadTemperatureDataFromTrimingBoard(char nTrimingBoardIndex,int *pData)
 290          {
 291   1        int nTemperatureData;
 292   1        
 293   1        for(nRxDataCunt = 0; nRxDataCunt < 48;nRxDataCunt++){
 294   2          pData[nRxDataCunt] = 0x0000;
 295   2        }
 296   1        
 297   1        for(nDeviceIndex = 0; nDeviceIndex < 8; nDeviceIndex++){
 298   2          if(nTrimingBoardIndex & nBoardIsHerePwr[nDeviceIndex]){
 299   3            SetUsartTwoPosionAndBtr(Com2_TstBrd,nTestBoardName[nDeviceIndex],BTR115200);
 300   3            break;
 301   3          }
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 6   

 302   2        }
 303   1        
 304   1        nRxDataCunt = 0;
 305   1        S2CON &= 0xfe;
 306   1        while(1){
 307   2          S2BUF = 0x02;
 308   2          while((S2CON & 0x02) != 0x02);  // S4TI == 1
 309   2          S2CON &= 0xfd; 
 310   2          
 311   2          if(S2CON & 0x01){ // 等待数据到
 312   3            S2CON &= 0xfe;
 313   3            
 314   3            nRecieveData[nRxDataCunt] = S2BUF; // 保存接收到的第一个数据
 315   3            nRxDataCunt++;
 316   3            break;
 317   3          }
 318   2        }
 319   1        
 320   1        while(1){
 321   2          if(S2CON & 0x01){ // 等待数据到
 322   3            S2CON &= 0xfe;
 323   3            nRecieveData[nRxDataCunt] = S2BUF; // 保存接收到的数据
 324   3            nRxDataCunt++;
 325   3            if(nRxDataCunt == 96)
 326   3            break;
 327   3          }
 328   2        }
 329   1          
 330   1        for(nRxDataCunt = 0; nRxDataCunt < 96; nRxDataCunt = nRxDataCunt + 2){
 331   2          nTemperatureData = nRecieveData[nRxDataCunt]; 
 332   2          nTemperatureData = nTemperatureData << 0x08;
 333   2          nTemperatureData = nTemperatureData + (unsigned char)(nRecieveData[nRxDataCunt + 1]);
 334   2            
 335   2          pData[nRxDataCunt / 2] = nTemperatureData;
 336   2        }
 337   1      }
 338          
 339          /**
 340          *** 函数名称 ： SendPt100DataToTrimingBoard
 341          *** 函数功能 ： 将巡检仪的温度数据送到校准板
 342          *** 入口参数 ： 1、nTrimingBoardIndex 校准板编号：1~8
 343          ***             2、pData 温度数据
 344          *** 返回值   ： 无
 345          */
 346          
 347          void SendPt100DataToTrimingBoard(char nTrimingBoardIndex,float *pData)
 348          {
 349   1        sprintf(nRecieveData,"PT,%.3f,%.3f,%.3f,%.3f@",pData[0],pData[1],pData[2],pData[3]);
 350   1        for(nDeviceIndex = 0; nDeviceIndex < 8; nDeviceIndex++){
 351   2          if(nTrimingBoardIndex & nBoardIsHerePwr[nDeviceIndex]){
 352   3            SetUsartTwoPosionAndBtr(Com2_TstBrd,nTestBoardName[nDeviceIndex],BTR115200);
 353   3          }
 354   2        }
 355   1        
 356   1        SendStringData(ComPort_2,nRecieveData);
 357   1      }
 358          void SendTrimmingVBEandRotationValues(char nTrimingBoardIndex,int *pData)
 359          {
 360   1        char nVBEData[50];
 361   1        
 362   1        memset(nVBEData,'\0',sizeof(nVBEData));
 363   1        if(Version == Version_B){
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 7   

 364   2          sprintf(nVBEData,"B,%d,%d@",pData[0],pData[1]);
 365   2        }
 366   1        else if(Version == Version_C){
 367   2          sprintf(nVBEData,"C,%d,%d@",pData[0],pData[1]);
 368   2        }
 369   1        for(nDeviceIndex = 0; nDeviceIndex < 8; nDeviceIndex++){
 370   2          if(nTrimingBoardIndex & nBoardIsHerePwr[nDeviceIndex]){
 371   3            SetUsartTwoPosionAndBtr(Com2_TstBrd,nTestBoardName[nDeviceIndex],BTR115200);
 372   3            SendStringData(ComPort_2,nVBEData);
 373   3          }
 374   2        }   
 375   1      }
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 8   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION _UsartInit (BEGIN)
                                           ; SOURCE LINE # 22
;---- Variable 'nBtr' assigned to Register 'R5' ----
;---- Variable 'nComPortIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 23
                                           ; SOURCE LINE # 24
0000 EF                MOV     A,R7
0001 FB                MOV     R3,A
0002 33                RLC     A
0003 95E0              SUBB    A,ACC
0005 4B                ORL     A,R3
0006 6003              JZ      $ + 5H
0008 020000      R     LJMP    ?C0001
                                           ; SOURCE LINE # 25
000B 759850            MOV     SCON,#050H
                                           ; SOURCE LINE # 26
000E 438E40            ORL     AUXR,#040H
                                           ; SOURCE LINE # 27
0011 538EFE            ANL     AUXR,#0FEH
                                           ; SOURCE LINE # 28
0014 53890F            ANL     TMOD,#0FH
                                           ; SOURCE LINE # 30
0017 ED                MOV     A,R5
0018 FB                MOV     R3,A
0019 33                RLC     A
001A 95E0              SUBB    A,ACC
001C FA                MOV     R2,A
001D EB                MOV     A,R3
001E 6407              XRL     A,#07H
0020 4A                ORL     A,R2
0021 7006              JNZ     ?C0002
0023 758BD0            MOV     TL1,#0D0H
0026 758DFF            MOV     TH1,#0FFH
0029         ?C0002:
                                           ; SOURCE LINE # 31
0029 ED                MOV     A,R5
002A FB                MOV     R3,A
002B 33                RLC     A
002C 95E0              SUBB    A,ACC
002E FA                MOV     R2,A
002F EB                MOV     A,R3
0030 6406              XRL     A,#06H
0032 4A                ORL     A,R2
0033 7006              JNZ     ?C0003
0035 758BA0            MOV     TL1,#0A0H
0038 758DFF            MOV     TH1,#0FFH
003B         ?C0003:
                                           ; SOURCE LINE # 32
003B ED                MOV     A,R5
003C FB                MOV     R3,A
003D 33                RLC     A
003E 95E0              SUBB    A,ACC
0040 FA                MOV     R2,A
0041 EB                MOV     A,R3
0042 6405              XRL     A,#05H
0044 4A                ORL     A,R2
0045 7006              JNZ     ?C0004
0047 758B70            MOV     TL1,#070H
004A 758DFF            MOV     TH1,#0FFH
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 9   

004D         ?C0004:
                                           ; SOURCE LINE # 33
004D ED                MOV     A,R5
004E FB                MOV     R3,A
004F 33                RLC     A
0050 95E0              SUBB    A,ACC
0052 FA                MOV     R2,A
0053 EB                MOV     A,R3
0054 6404              XRL     A,#04H
0056 4A                ORL     A,R2
0057 7006              JNZ     ?C0005
0059 758BE0            MOV     TL1,#0E0H
005C 758DFE            MOV     TH1,#0FEH
005F         ?C0005:
                                           ; SOURCE LINE # 34
005F ED                MOV     A,R5
0060 FB                MOV     R3,A
0061 33                RLC     A
0062 95E0              SUBB    A,ACC
0064 FA                MOV     R2,A
0065 EB                MOV     A,R3
0066 6403              XRL     A,#03H
0068 4A                ORL     A,R2
0069 7006              JNZ     ?C0006
006B 758BC0            MOV     TL1,#0C0H
006E 758DFD            MOV     TH1,#0FDH
0071         ?C0006:
                                           ; SOURCE LINE # 35
0071 ED                MOV     A,R5
0072 FB                MOV     R3,A
0073 33                RLC     A
0074 95E0              SUBB    A,ACC
0076 FA                MOV     R2,A
0077 EB                MOV     A,R3
0078 6402              XRL     A,#02H
007A 4A                ORL     A,R2
007B 7006              JNZ     ?C0007
007D 758B80            MOV     TL1,#080H
0080 758DFB            MOV     TH1,#0FBH
0083         ?C0007:
                                           ; SOURCE LINE # 36
0083 ED                MOV     A,R5
0084 FB                MOV     R3,A
0085 33                RLC     A
0086 95E0              SUBB    A,ACC
0088 FA                MOV     R2,A
0089 EB                MOV     A,R3
008A 6401              XRL     A,#01H
008C 4A                ORL     A,R2
008D 7005              JNZ     ?C0008
008F F58B              MOV     TL1,A
0091 758DF7            MOV     TH1,#0F7H
0094         ?C0008:
                                           ; SOURCE LINE # 37
0094 ED                MOV     A,R5
0095 FB                MOV     R3,A
0096 33                RLC     A
0097 95E0              SUBB    A,ACC
0099 4B                ORL     A,R3
009A 7005              JNZ     ?C0009
009C F58B              MOV     TL1,A
009E 758DEE            MOV     TH1,#0EEH
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 10  

00A1         ?C0009:
                                           ; SOURCE LINE # 39
00A1 C2AB              CLR     ET1
                                           ; SOURCE LINE # 40
00A3 D28E              SETB    TR1
                                           ; SOURCE LINE # 41
00A5         ?C0001:
                                           ; SOURCE LINE # 43
00A5 EF                MOV     A,R7
00A6 33                RLC     A
00A7 95E0              SUBB    A,ACC
00A9 FE                MOV     R6,A
00AA EF                MOV     A,R7
00AB 6401              XRL     A,#01H
00AD 4E                ORL     A,R6
00AE 6003              JZ      $ + 5H
00B0 020000      R     LJMP    ?C0019
                                           ; SOURCE LINE # 44
00B3 759A50            MOV     S2CON,#050H
                                           ; SOURCE LINE # 45
00B6 ED                MOV     A,R5
00B7 FF                MOV     R7,A
00B8 33                RLC     A
00B9 95E0              SUBB    A,ACC
00BB FE                MOV     R6,A
00BC EF                MOV     A,R7
00BD 6407              XRL     A,#07H
00BF 4E                ORL     A,R6
00C0 7006              JNZ     ?C0011
00C2 75D7D0            MOV     T2L,#0D0H
00C5 75D6FF            MOV     T2H,#0FFH
00C8         ?C0011:
                                           ; SOURCE LINE # 46
00C8 ED                MOV     A,R5
00C9 FF                MOV     R7,A
00CA 33                RLC     A
00CB 95E0              SUBB    A,ACC
00CD FE                MOV     R6,A
00CE EF                MOV     A,R7
00CF 6406              XRL     A,#06H
00D1 4E                ORL     A,R6
00D2 7006              JNZ     ?C0012
00D4 75D7A0            MOV     T2L,#0A0H
00D7 75D6FF            MOV     T2H,#0FFH
00DA         ?C0012:
                                           ; SOURCE LINE # 47
00DA ED                MOV     A,R5
00DB FF                MOV     R7,A
00DC 33                RLC     A
00DD 95E0              SUBB    A,ACC
00DF FE                MOV     R6,A
00E0 EF                MOV     A,R7
00E1 6405              XRL     A,#05H
00E3 4E                ORL     A,R6
00E4 7006              JNZ     ?C0013
00E6 75D770            MOV     T2L,#070H
00E9 75D6FF            MOV     T2H,#0FFH
00EC         ?C0013:
                                           ; SOURCE LINE # 48
00EC ED                MOV     A,R5
00ED FF                MOV     R7,A
00EE 33                RLC     A
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 11  

00EF 95E0              SUBB    A,ACC
00F1 FE                MOV     R6,A
00F2 EF                MOV     A,R7
00F3 6404              XRL     A,#04H
00F5 4E                ORL     A,R6
00F6 7006              JNZ     ?C0014
00F8 75D7E0            MOV     T2L,#0E0H
00FB 75D6FE            MOV     T2H,#0FEH
00FE         ?C0014:
                                           ; SOURCE LINE # 49
00FE ED                MOV     A,R5
00FF FF                MOV     R7,A
0100 33                RLC     A
0101 95E0              SUBB    A,ACC
0103 FE                MOV     R6,A
0104 EF                MOV     A,R7
0105 6403              XRL     A,#03H
0107 4E                ORL     A,R6
0108 7006              JNZ     ?C0015
010A 75D7C0            MOV     T2L,#0C0H
010D 75D6FD            MOV     T2H,#0FDH
0110         ?C0015:
                                           ; SOURCE LINE # 50
0110 ED                MOV     A,R5
0111 FF                MOV     R7,A
0112 33                RLC     A
0113 95E0              SUBB    A,ACC
0115 FE                MOV     R6,A
0116 EF                MOV     A,R7
0117 6402              XRL     A,#02H
0119 4E                ORL     A,R6
011A 7006              JNZ     ?C0016
011C 75D780            MOV     T2L,#080H
011F 75D6FB            MOV     T2H,#0FBH
0122         ?C0016:
                                           ; SOURCE LINE # 51
0122 ED                MOV     A,R5
0123 FF                MOV     R7,A
0124 33                RLC     A
0125 95E0              SUBB    A,ACC
0127 FE                MOV     R6,A
0128 EF                MOV     A,R7
0129 6401              XRL     A,#01H
012B 4E                ORL     A,R6
012C 7005              JNZ     ?C0017
012E F5D7              MOV     T2L,A
0130 75D6F7            MOV     T2H,#0F7H
0133         ?C0017:
                                           ; SOURCE LINE # 52
0133 AF05              MOV     R7,AR5
0135 EF                MOV     A,R7
0136 33                RLC     A
0137 95E0              SUBB    A,ACC
0139 4F                ORL     A,R7
013A 7005              JNZ     ?C0018
013C F5D7              MOV     T2L,A
013E 75D6EE            MOV     T2H,#0EEH
0141         ?C0018:
                                           ; SOURCE LINE # 54
0141 438E14            ORL     AUXR,#014H
                                           ; SOURCE LINE # 55
                                           ; SOURCE LINE # 56
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 12  

0144         ?C0019:
0144 22                RET     
             ; FUNCTION _UsartInit (END)

             ; FUNCTION _UsartInterrupt (BEGIN)
                                           ; SOURCE LINE # 64
;---- Variable 'nEnbDisable' assigned to Register 'R5' ----
;---- Variable 'nComPortIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 65
                                           ; SOURCE LINE # 66
0000 EF                MOV     A,R7
0001 FB                MOV     R3,A
0002 33                RLC     A
0003 95E0              SUBB    A,ACC
0005 4B                ORL     A,R3
0006 7012              JNZ     ?C0020
                                           ; SOURCE LINE # 67
0008 ED                MOV     A,R5
0009 FB                MOV     R3,A
000A 33                RLC     A
000B 95E0              SUBB    A,ACC
000D FA                MOV     R2,A
000E EB                MOV     A,R3
000F 6401              XRL     A,#01H
0011 4A                ORL     A,R2
0012 7004              JNZ     ?C0021
                                           ; SOURCE LINE # 68
0014 D2AC              SETB    ES
                                           ; SOURCE LINE # 69
0016 8002              SJMP    ?C0020
0018         ?C0021:
                                           ; SOURCE LINE # 71
                                           ; SOURCE LINE # 72
0018 C2AC              CLR     ES
                                           ; SOURCE LINE # 73
                                           ; SOURCE LINE # 74
001A         ?C0020:
                                           ; SOURCE LINE # 76
001A EF                MOV     A,R7
001B 33                RLC     A
001C 95E0              SUBB    A,ACC
001E FE                MOV     R6,A
001F EF                MOV     A,R7
0020 6401              XRL     A,#01H
0022 4E                ORL     A,R6
0023 7014              JNZ     ?C0026
                                           ; SOURCE LINE # 77
0025 AF05              MOV     R7,AR5
0027 EF                MOV     A,R7
0028 33                RLC     A
0029 95E0              SUBB    A,ACC
002B FE                MOV     R6,A
002C EF                MOV     A,R7
002D 6401              XRL     A,#01H
002F 4E                ORL     A,R6
0030 7004              JNZ     ?C0024
                                           ; SOURCE LINE # 78
0032 43AF01            ORL     IE2,#01H
                                           ; SOURCE LINE # 79
0035 22                RET     
0036         ?C0024:
                                           ; SOURCE LINE # 81
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 13  

                                           ; SOURCE LINE # 82
0036 53AFFE            ANL     IE2,#0FEH
                                           ; SOURCE LINE # 83
                                           ; SOURCE LINE # 84
                                           ; SOURCE LINE # 85
0039         ?C0026:
0039 22                RET     
             ; FUNCTION _UsartInterrupt (END)

             ; FUNCTION _SetUsartTwoPosionAndBtr (BEGIN)
                                           ; SOURCE LINE # 95
0000 900000      R     MOV     DPTR,#nSerialPortPosion
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
;---- Variable 'nDeviceName' assigned to Register 'R1' ----
0005 A905              MOV     R1,AR5
;---- Variable 'nBtr' assigned to Register 'R3' ----
                                           ; SOURCE LINE # 96
                                           ; SOURCE LINE # 97
0007 AF03              MOV     R7,AR3
0009 AD07              MOV     R5,AR7
000B 7F01              MOV     R7,#01H
000D 120000      R     LCALL   _UsartInit
                                           ; SOURCE LINE # 98
0010 900000      R     MOV     DPTR,#nTempP6PortData
0013 E5E8              MOV     A,P6
0015 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 100
0016 900000      R     MOV     DPTR,#nSerialPortPosion
0019 E0                MOVX    A,@DPTR
001A FF                MOV     R7,A
001B 33                RLC     A
001C 95E0              SUBB    A,ACC
001E FE                MOV     R6,A
001F EF                MOV     A,R7
0020 6401              XRL     A,#01H
0022 4E                ORL     A,R6
0023 7060              JNZ     ?C0027
                                           ; SOURCE LINE # 101
0025 43BA01            ORL     P_SW2,#01H
                                           ; SOURCE LINE # 103
0028 900000      R     MOV     DPTR,#nTempP6PortData
002B E0                MOVX    A,@DPTR
002C 541F              ANL     A,#01FH
002E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 104
002F E4                CLR     A
0030 900000      R     MOV     DPTR,#nDeviceIndex
0033 F0                MOVX    @DPTR,A
0034         ?C0028:
0034 900000      R     MOV     DPTR,#nDeviceIndex
0037 E0                MOVX    A,@DPTR
0038 FF                MOV     R7,A
0039 33                RLC     A
003A 95E0              SUBB    A,ACC
003C FE                MOV     R6,A
003D C3                CLR     C
003E EF                MOV     A,R7
003F 9408              SUBB    A,#08H
0041 EE                MOV     A,R6
0042 6480              XRL     A,#080H
0044 9480              SUBB    A,#080H
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 14  

0046 503D              JNC     ?C0027
                                           ; SOURCE LINE # 105
0048 E0                MOVX    A,@DPTR
0049 33                RLC     A
004A 95E0              SUBB    A,ACC
004C FE                MOV     R6,A
004D 7400        R     MOV     A,#LOW nOtherDeviceName
004F 2F                ADD     A,R7
0050 F582              MOV     DPL,A
0052 7400        R     MOV     A,#HIGH nOtherDeviceName
0054 3E                ADDC    A,R6
0055 F583              MOV     DPH,A
0057 E0                MOVX    A,@DPTR
0058 B50122            CJNE    A,AR1,?C0030
                                           ; SOURCE LINE # 106
005B 900000      R     MOV     DPTR,#nTempP6PortData
005E E0                MOVX    A,@DPTR
005F FF                MOV     R7,A
0060 900000      R     MOV     DPTR,#nDeviceIndex
0063 E0                MOVX    A,@DPTR
0064 FD                MOV     R5,A
0065 33                RLC     A
0066 95E0              SUBB    A,ACC
0068 FC                MOV     R4,A
0069 7400        R     MOV     A,#LOW nOtherDeviceName
006B 2D                ADD     A,R5
006C F582              MOV     DPL,A
006E 7400        R     MOV     A,#HIGH nOtherDeviceName
0070 3C                ADDC    A,R4
0071 F583              MOV     DPH,A
0073 E0                MOVX    A,@DPTR
0074 FE                MOV     R6,A
0075 EF                MOV     A,R7
0076 4E                ORL     A,R6
0077 900000      R     MOV     DPTR,#nTempP6PortData
007A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 107
007B 8008              SJMP    ?C0027
                                           ; SOURCE LINE # 108
                                           ; SOURCE LINE # 109
007D         ?C0030:
007D 900000      R     MOV     DPTR,#nDeviceIndex
0080 E0                MOVX    A,@DPTR
0081 04                INC     A
0082 F0                MOVX    @DPTR,A
0083 80AF              SJMP    ?C0028
                                           ; SOURCE LINE # 110
0085         ?C0027:
                                           ; SOURCE LINE # 112
0085 900000      R     MOV     DPTR,#nSerialPortPosion
0088 E0                MOVX    A,@DPTR
0089 FF                MOV     R7,A
008A 33                RLC     A
008B 95E0              SUBB    A,ACC
008D FE                MOV     R6,A
008E EF                MOV     A,R7
008F 6403              XRL     A,#03H
0091 4E                ORL     A,R6
0092 7060              JNZ     ?C0032
                                           ; SOURCE LINE # 113
0094 53BAFE            ANL     P_SW2,#0FEH
                                           ; SOURCE LINE # 115
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 15  

0097 900000      R     MOV     DPTR,#nTempP6PortData
009A E0                MOVX    A,@DPTR
009B 54F8              ANL     A,#0F8H
009D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 116
009E E4                CLR     A
009F 900000      R     MOV     DPTR,#nDeviceIndex
00A2 F0                MOVX    @DPTR,A
00A3         ?C0033:
00A3 900000      R     MOV     DPTR,#nDeviceIndex
00A6 E0                MOVX    A,@DPTR
00A7 FF                MOV     R7,A
00A8 33                RLC     A
00A9 95E0              SUBB    A,ACC
00AB FE                MOV     R6,A
00AC C3                CLR     C
00AD EF                MOV     A,R7
00AE 9408              SUBB    A,#08H
00B0 EE                MOV     A,R6
00B1 6480              XRL     A,#080H
00B3 9480              SUBB    A,#080H
00B5 503D              JNC     ?C0032
                                           ; SOURCE LINE # 117
00B7 E0                MOVX    A,@DPTR
00B8 33                RLC     A
00B9 95E0              SUBB    A,ACC
00BB FE                MOV     R6,A
00BC 7400        R     MOV     A,#LOW nTestBoardName
00BE 2F                ADD     A,R7
00BF F582              MOV     DPL,A
00C1 7400        R     MOV     A,#HIGH nTestBoardName
00C3 3E                ADDC    A,R6
00C4 F583              MOV     DPH,A
00C6 E0                MOVX    A,@DPTR
00C7 B50122            CJNE    A,AR1,?C0035
                                           ; SOURCE LINE # 118
00CA 900000      R     MOV     DPTR,#nTempP6PortData
00CD E0                MOVX    A,@DPTR
00CE FF                MOV     R7,A
00CF 900000      R     MOV     DPTR,#nDeviceIndex
00D2 E0                MOVX    A,@DPTR
00D3 FD                MOV     R5,A
00D4 33                RLC     A
00D5 95E0              SUBB    A,ACC
00D7 FC                MOV     R4,A
00D8 7400        R     MOV     A,#LOW nTestBoardName
00DA 2D                ADD     A,R5
00DB F582              MOV     DPL,A
00DD 7400        R     MOV     A,#HIGH nTestBoardName
00DF 3C                ADDC    A,R4
00E0 F583              MOV     DPH,A
00E2 E0                MOVX    A,@DPTR
00E3 FE                MOV     R6,A
00E4 EF                MOV     A,R7
00E5 4E                ORL     A,R6
00E6 900000      R     MOV     DPTR,#nTempP6PortData
00E9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 119
00EA 8008              SJMP    ?C0032
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
00EC         ?C0035:
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 16  

00EC 900000      R     MOV     DPTR,#nDeviceIndex
00EF E0                MOVX    A,@DPTR
00F0 04                INC     A
00F1 F0                MOVX    @DPTR,A
00F2 80AF              SJMP    ?C0033
                                           ; SOURCE LINE # 122
00F4         ?C0032:
                                           ; SOURCE LINE # 124
00F4 900000      R     MOV     DPTR,#nTempP6PortData
00F7 E0                MOVX    A,@DPTR
00F8 F5E8              MOV     P6,A
                                           ; SOURCE LINE # 125
00FA 7F01              MOV     R7,#01H
00FC 7E00              MOV     R6,#00H
00FE 120000      E     LCALL   _Delay_MS
                                           ; SOURCE LINE # 126
0101 22                RET     
             ; FUNCTION _SetUsartTwoPosionAndBtr (END)

             ; FUNCTION _SendStringData (BEGIN)
                                           ; SOURCE LINE # 134
0000 900000      R     MOV     DPTR,#pData
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
;---- Variable 'nComPortIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 135
                                           ; SOURCE LINE # 136
000B EF                MOV     A,R7
000C FD                MOV     R5,A
000D 33                RLC     A
000E 95E0              SUBB    A,ACC
0010 4D                ORL     A,R5
0011 702B              JNZ     ?C0038
0013         ?C0039:
                                           ; SOURCE LINE # 137
0013 900000      R     MOV     DPTR,#pData
0016 E0                MOVX    A,@DPTR
0017 FB                MOV     R3,A
0018 A3                INC     DPTR
0019 E0                MOVX    A,@DPTR
001A FA                MOV     R2,A
001B A3                INC     DPTR
001C E0                MOVX    A,@DPTR
001D F9                MOV     R1,A
001E 120000      E     LCALL   ?C?CLDPTR
0021 601B              JZ      ?C0038
                                           ; SOURCE LINE # 138
0023 900000      R     MOV     DPTR,#pData
0026 E0                MOVX    A,@DPTR
0027 A3                INC     DPTR
0028 E4                CLR     A
0029 75F001            MOV     B,#01H
002C 120000      E     LCALL   ?C?ILDIX
002F A9F0              MOV     R1,B
0031 FA                MOV     R2,A
0032 120000      E     LCALL   ?C?CLDPTR
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 17  

0035 F599              MOV     SBUF,A
0037         ?C0041:
                                           ; SOURCE LINE # 139
0037 3099FD            JNB     TI,?C0041
                                           ; SOURCE LINE # 140
003A C299              CLR     TI
                                           ; SOURCE LINE # 141
003C 80D5              SJMP    ?C0039
                                           ; SOURCE LINE # 142
003E         ?C0038:
                                           ; SOURCE LINE # 144
003E EF                MOV     A,R7
003F 33                RLC     A
0040 95E0              SUBB    A,ACC
0042 FE                MOV     R6,A
0043 EF                MOV     A,R7
0044 6401              XRL     A,#01H
0046 4E                ORL     A,R6
0047 7031              JNZ     ?C0048
0049         ?C0044:
                                           ; SOURCE LINE # 145
0049 900000      R     MOV     DPTR,#pData
004C E0                MOVX    A,@DPTR
004D FB                MOV     R3,A
004E A3                INC     DPTR
004F E0                MOVX    A,@DPTR
0050 FA                MOV     R2,A
0051 A3                INC     DPTR
0052 E0                MOVX    A,@DPTR
0053 F9                MOV     R1,A
0054 120000      E     LCALL   ?C?CLDPTR
0057 6021              JZ      ?C0048
                                           ; SOURCE LINE # 146
0059 900000      R     MOV     DPTR,#pData
005C E0                MOVX    A,@DPTR
005D A3                INC     DPTR
005E E4                CLR     A
005F 75F001            MOV     B,#01H
0062 120000      E     LCALL   ?C?ILDIX
0065 A9F0              MOV     R1,B
0067 FA                MOV     R2,A
0068 120000      E     LCALL   ?C?CLDPTR
006B F59B              MOV     S2BUF,A
006D         ?C0046:
                                           ; SOURCE LINE # 147
006D E59A              MOV     A,S2CON
006F 5402              ANL     A,#02H
0071 6402              XRL     A,#02H
0073 70F8              JNZ     ?C0046
                                           ; SOURCE LINE # 148
0075 539AFD            ANL     S2CON,#0FDH
                                           ; SOURCE LINE # 149
0078 80CF              SJMP    ?C0044
                                           ; SOURCE LINE # 150
                                           ; SOURCE LINE # 151
007A         ?C0048:
007A 22                RET     
             ; FUNCTION _SendStringData (END)

             ; FUNCTION _SendFloatData (BEGIN)
                                           ; SOURCE LINE # 160
0000 900000      R     MOV     DPTR,#nComPortIndex
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 18  

0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EB                MOV     A,R3
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 EA                MOV     A,R2
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C E9                MOV     A,R1
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 161
                                           ; SOURCE LINE # 162
000E E4                CLR     A
000F 900000      R     MOV     DPTR,#nCunt
0012 F0                MOVX    @DPTR,A
0013 A3                INC     DPTR
0014 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 165
0015 900000      R     MOV     DPTR,#nCunt
0018 F0                MOVX    @DPTR,A
0019 A3                INC     DPTR
001A F0                MOVX    @DPTR,A
001B         ?C0049:
001B 900000      R     MOV     DPTR,#nFloatDataCunt
001E E0                MOVX    A,@DPTR
001F FE                MOV     R6,A
0020 A3                INC     DPTR
0021 E0                MOVX    A,@DPTR
0022 FF                MOV     R7,A
0023 C3                CLR     C
0024 900000      R     MOV     DPTR,#nCunt+01H
0027 E0                MOVX    A,@DPTR
0028 9F                SUBB    A,R7
0029 900000      R     MOV     DPTR,#nCunt
002C E0                MOVX    A,@DPTR
002D 9E                SUBB    A,R6
002E 4003              JC      $ + 5H
0030 020000      R     LJMP    ?C0052
                                           ; SOURCE LINE # 166
0033 7B01              MOV     R3,#01H
0035 7A00        R     MOV     R2,#HIGH nSendData
0037 7900        R     MOV     R1,#LOW nSendData
0039 C003              PUSH    AR3
003B C002              PUSH    AR2
003D C001              PUSH    AR1
003F 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
0042 74FF              MOV     A,#0FFH
0044 F0                MOVX    @DPTR,A
0045 A3                INC     DPTR
0046 7400        R     MOV     A,#HIGH ?SC_0
0048 F0                MOVX    @DPTR,A
0049 A3                INC     DPTR
004A 7400        R     MOV     A,#LOW ?SC_0
004C F0                MOVX    @DPTR,A
004D 900000      R     MOV     DPTR,#nCunt
0050 E0                MOVX    A,@DPTR
0051 FE                MOV     R6,A
0052 A3                INC     DPTR
0053 E0                MOVX    A,@DPTR
0054 7802              MOV     R0,#02H
0056         ?C0120:
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 19  

0056 C3                CLR     C
0057 33                RLC     A
0058 CE                XCH     A,R6
0059 33                RLC     A
005A CE                XCH     A,R6
005B D8F9              DJNZ    R0,?C0120
005D FF                MOV     R7,A
005E 900000      R     MOV     DPTR,#pFloatData
0061 E0                MOVX    A,@DPTR
0062 FB                MOV     R3,A
0063 A3                INC     DPTR
0064 E0                MOVX    A,@DPTR
0065 FA                MOV     R2,A
0066 A3                INC     DPTR
0067 E0                MOVX    A,@DPTR
0068 F9                MOV     R1,A
0069 8F82              MOV     DPL,R7
006B 8E83              MOV     DPH,R6
006D 120000      E     LCALL   ?C?LLDOPTR
0070 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0073 120000      E     LCALL   ?C?LSTXDATA
0076 D001              POP     AR1
0078 D002              POP     AR2
007A D003              POP     AR3
007C 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 167
007F 900000      R     MOV     DPTR,#pData
0082 7401              MOV     A,#01H
0084 F0                MOVX    @DPTR,A
0085 A3                INC     DPTR
0086 7400        R     MOV     A,#HIGH nSendData
0088 F0                MOVX    @DPTR,A
0089 A3                INC     DPTR
008A 7400        R     MOV     A,#LOW nSendData
008C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 169
008D 900000      R     MOV     DPTR,#nComPortIndex
0090 E0                MOVX    A,@DPTR
0091 FF                MOV     R7,A
0092 900000      R     MOV     DPTR,#pData
0095 E0                MOVX    A,@DPTR
0096 FB                MOV     R3,A
0097 A3                INC     DPTR
0098 E0                MOVX    A,@DPTR
0099 FA                MOV     R2,A
009A A3                INC     DPTR
009B E0                MOVX    A,@DPTR
009C F9                MOV     R1,A
009D 120000      R     LCALL   _SendStringData
                                           ; SOURCE LINE # 170
00A0 900000      R     MOV     DPTR,#nCunt+01H
00A3 E0                MOVX    A,@DPTR
00A4 04                INC     A
00A5 F0                MOVX    @DPTR,A
00A6 7006              JNZ     ?C0121
00A8 900000      R     MOV     DPTR,#nCunt
00AB E0                MOVX    A,@DPTR
00AC 04                INC     A
00AD F0                MOVX    @DPTR,A
00AE         ?C0121:
00AE 020000      R     LJMP    ?C0049
                                           ; SOURCE LINE # 171
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 20  

00B1         ?C0052:
00B1 22                RET     
             ; FUNCTION _SendFloatData (END)

             ; FUNCTION _SendIntData (BEGIN)
                                           ; SOURCE LINE # 180
0000 900000      R     MOV     DPTR,#nComPortIndex
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EB                MOV     A,R3
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 EA                MOV     A,R2
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C E9                MOV     A,R1
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 181
                                           ; SOURCE LINE # 182
000E E4                CLR     A
000F 900000      R     MOV     DPTR,#nCunt
0012 F0                MOVX    @DPTR,A
0013 A3                INC     DPTR
0014 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 185
0015 900000      R     MOV     DPTR,#nCunt
0018 F0                MOVX    @DPTR,A
0019 A3                INC     DPTR
001A F0                MOVX    @DPTR,A
001B         ?C0053:
001B 900000      R     MOV     DPTR,#nIntDataCunt
001E E0                MOVX    A,@DPTR
001F FE                MOV     R6,A
0020 A3                INC     DPTR
0021 E0                MOVX    A,@DPTR
0022 FF                MOV     R7,A
0023 C3                CLR     C
0024 900000      R     MOV     DPTR,#nCunt+01H
0027 E0                MOVX    A,@DPTR
0028 9F                SUBB    A,R7
0029 900000      R     MOV     DPTR,#nCunt
002C E0                MOVX    A,@DPTR
002D 9E                SUBB    A,R6
002E 4003              JC      $ + 5H
0030 020000      R     LJMP    ?C0056
                                           ; SOURCE LINE # 186
0033 7B01              MOV     R3,#01H
0035 7A00        R     MOV     R2,#HIGH nSendData
0037 7900        R     MOV     R1,#LOW nSendData
0039 C003              PUSH    AR3
003B C002              PUSH    AR2
003D C001              PUSH    AR1
003F 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
0042 74FF              MOV     A,#0FFH
0044 F0                MOVX    @DPTR,A
0045 A3                INC     DPTR
0046 7400        R     MOV     A,#HIGH ?SC_4
0048 F0                MOVX    @DPTR,A
0049 A3                INC     DPTR
004A 7400        R     MOV     A,#LOW ?SC_4
004C F0                MOVX    @DPTR,A
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 21  

004D 900000      R     MOV     DPTR,#nCunt+01H
0050 E0                MOVX    A,@DPTR
0051 25E0              ADD     A,ACC
0053 FF                MOV     R7,A
0054 900000      R     MOV     DPTR,#nCunt
0057 E0                MOVX    A,@DPTR
0058 33                RLC     A
0059 FE                MOV     R6,A
005A 900000      R     MOV     DPTR,#pIntData
005D E0                MOVX    A,@DPTR
005E FB                MOV     R3,A
005F A3                INC     DPTR
0060 E0                MOVX    A,@DPTR
0061 FA                MOV     R2,A
0062 A3                INC     DPTR
0063 E0                MOVX    A,@DPTR
0064 F9                MOV     R1,A
0065 8F82              MOV     DPL,R7
0067 8E83              MOV     DPH,R6
0069 120000      E     LCALL   ?C?ILDOPTR
006C FF                MOV     R7,A
006D 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0070 E5F0              MOV     A,B
0072 F0                MOVX    @DPTR,A
0073 A3                INC     DPTR
0074 EF                MOV     A,R7
0075 F0                MOVX    @DPTR,A
0076 D001              POP     AR1
0078 D002              POP     AR2
007A D003              POP     AR3
007C 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 187
007F 900000      R     MOV     DPTR,#pData
0082 7401              MOV     A,#01H
0084 F0                MOVX    @DPTR,A
0085 A3                INC     DPTR
0086 7400        R     MOV     A,#HIGH nSendData
0088 F0                MOVX    @DPTR,A
0089 A3                INC     DPTR
008A 7400        R     MOV     A,#LOW nSendData
008C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 189
008D 900000      R     MOV     DPTR,#nComPortIndex
0090 E0                MOVX    A,@DPTR
0091 FF                MOV     R7,A
0092 900000      R     MOV     DPTR,#pData
0095 E0                MOVX    A,@DPTR
0096 FB                MOV     R3,A
0097 A3                INC     DPTR
0098 E0                MOVX    A,@DPTR
0099 FA                MOV     R2,A
009A A3                INC     DPTR
009B E0                MOVX    A,@DPTR
009C F9                MOV     R1,A
009D 120000      R     LCALL   _SendStringData
                                           ; SOURCE LINE # 190
00A0 900000      R     MOV     DPTR,#nCunt+01H
00A3 E0                MOVX    A,@DPTR
00A4 04                INC     A
00A5 F0                MOVX    @DPTR,A
00A6 7006              JNZ     ?C0122
00A8 900000      R     MOV     DPTR,#nCunt
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 22  

00AB E0                MOVX    A,@DPTR
00AC 04                INC     A
00AD F0                MOVX    @DPTR,A
00AE         ?C0122:
00AE 020000      R     LJMP    ?C0053
                                           ; SOURCE LINE # 191
00B1         ?C0056:
00B1 22                RET     
             ; FUNCTION _SendIntData (END)

             ; FUNCTION _SendIntDataSelect (BEGIN)
                                           ; SOURCE LINE # 192
0000 900000      R     MOV     DPTR,#nComPortIndex
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EB                MOV     A,R3
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 EA                MOV     A,R2
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C E9                MOV     A,R1
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 193
                                           ; SOURCE LINE # 194
000E E4                CLR     A
000F 900000      R     MOV     DPTR,#nCunt
0012 F0                MOVX    @DPTR,A
0013 A3                INC     DPTR
0014 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 197
0015 900000      R     MOV     DPTR,#nStartDataCunt
0018 E0                MOVX    A,@DPTR
0019 FF                MOV     R7,A
001A A3                INC     DPTR
001B E0                MOVX    A,@DPTR
001C 900000      R     MOV     DPTR,#nCunt
001F CF                XCH     A,R7
0020 F0                MOVX    @DPTR,A
0021 A3                INC     DPTR
0022 EF                MOV     A,R7
0023 F0                MOVX    @DPTR,A
0024         ?C0057:
0024 900000      R     MOV     DPTR,#nStopDataCunt
0027 E0                MOVX    A,@DPTR
0028 FE                MOV     R6,A
0029 A3                INC     DPTR
002A E0                MOVX    A,@DPTR
002B FF                MOV     R7,A
002C C3                CLR     C
002D 900000      R     MOV     DPTR,#nCunt+01H
0030 E0                MOVX    A,@DPTR
0031 9F                SUBB    A,R7
0032 900000      R     MOV     DPTR,#nCunt
0035 E0                MOVX    A,@DPTR
0036 9E                SUBB    A,R6
0037 4003              JC      $ + 5H
0039 020000      R     LJMP    ?C0060
                                           ; SOURCE LINE # 198
003C 7B01              MOV     R3,#01H
003E 7A00        R     MOV     R2,#HIGH nSendData
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 23  

0040 7900        R     MOV     R1,#LOW nSendData
0042 C003              PUSH    AR3
0044 C002              PUSH    AR2
0046 C001              PUSH    AR1
0048 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
004B 74FF              MOV     A,#0FFH
004D F0                MOVX    @DPTR,A
004E A3                INC     DPTR
004F 7400        R     MOV     A,#HIGH ?SC_4
0051 F0                MOVX    @DPTR,A
0052 A3                INC     DPTR
0053 7400        R     MOV     A,#LOW ?SC_4
0055 F0                MOVX    @DPTR,A
0056 900000      R     MOV     DPTR,#nCunt+01H
0059 E0                MOVX    A,@DPTR
005A 25E0              ADD     A,ACC
005C FF                MOV     R7,A
005D 900000      R     MOV     DPTR,#nCunt
0060 E0                MOVX    A,@DPTR
0061 33                RLC     A
0062 FE                MOV     R6,A
0063 900000      R     MOV     DPTR,#pIntData
0066 E0                MOVX    A,@DPTR
0067 FB                MOV     R3,A
0068 A3                INC     DPTR
0069 E0                MOVX    A,@DPTR
006A FA                MOV     R2,A
006B A3                INC     DPTR
006C E0                MOVX    A,@DPTR
006D F9                MOV     R1,A
006E 8F82              MOV     DPL,R7
0070 8E83              MOV     DPH,R6
0072 120000      E     LCALL   ?C?ILDOPTR
0075 FF                MOV     R7,A
0076 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0079 E5F0              MOV     A,B
007B F0                MOVX    @DPTR,A
007C A3                INC     DPTR
007D EF                MOV     A,R7
007E F0                MOVX    @DPTR,A
007F D001              POP     AR1
0081 D002              POP     AR2
0083 D003              POP     AR3
0085 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 199
0088 900000      R     MOV     DPTR,#pData
008B 7401              MOV     A,#01H
008D F0                MOVX    @DPTR,A
008E A3                INC     DPTR
008F 7400        R     MOV     A,#HIGH nSendData
0091 F0                MOVX    @DPTR,A
0092 A3                INC     DPTR
0093 7400        R     MOV     A,#LOW nSendData
0095 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 201
0096 900000      R     MOV     DPTR,#nComPortIndex
0099 E0                MOVX    A,@DPTR
009A FF                MOV     R7,A
009B 900000      R     MOV     DPTR,#pData
009E E0                MOVX    A,@DPTR
009F FB                MOV     R3,A
00A0 A3                INC     DPTR
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 24  

00A1 E0                MOVX    A,@DPTR
00A2 FA                MOV     R2,A
00A3 A3                INC     DPTR
00A4 E0                MOVX    A,@DPTR
00A5 F9                MOV     R1,A
00A6 120000      R     LCALL   _SendStringData
                                           ; SOURCE LINE # 202
00A9 900000      R     MOV     DPTR,#nCunt+01H
00AC E0                MOVX    A,@DPTR
00AD 04                INC     A
00AE F0                MOVX    @DPTR,A
00AF 7006              JNZ     ?C0123
00B1 900000      R     MOV     DPTR,#nCunt
00B4 E0                MOVX    A,@DPTR
00B5 04                INC     A
00B6 F0                MOVX    @DPTR,A
00B7         ?C0123:
00B7 020000      R     LJMP    ?C0057
                                           ; SOURCE LINE # 203
00BA         ?C0060:
00BA 22                RET     
             ; FUNCTION _SendIntDataSelect (END)

             ; FUNCTION _SendData (BEGIN)
                                           ; SOURCE LINE # 213
0000 900000      R     MOV     DPTR,#nComPortIndex
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EB                MOV     A,R3
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 EA                MOV     A,R2
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C E9                MOV     A,R1
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 214
                                           ; SOURCE LINE # 215
;---- Variable 'nCunt' assigned to Register 'R6/R7' ----
000E E4                CLR     A
000F FF                MOV     R7,A
0010 FE                MOV     R6,A
                                           ; SOURCE LINE # 216
0011         ?C0061:
0011 D3                SETB    C
0012 900000      R     MOV     DPTR,#nIntDataCunt+01H
0015 E0                MOVX    A,@DPTR
0016 9F                SUBB    A,R7
0017 900000      R     MOV     DPTR,#nIntDataCunt
001A E0                MOVX    A,@DPTR
001B 9E                SUBB    A,R6
001C 4057              JC      ?C0070
                                           ; SOURCE LINE # 217
001E 900000      R     MOV     DPTR,#nComPortIndex
0021 E0                MOVX    A,@DPTR
0022 FD                MOV     R5,A
0023 33                RLC     A
0024 95E0              SUBB    A,ACC
0026 FC                MOV     R4,A
0027 ED                MOV     A,R5
0028 4C                ORL     A,R4
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 25  

0029 7017              JNZ     ?C0064
                                           ; SOURCE LINE # 218
002B A3                INC     DPTR
002C E0                MOVX    A,@DPTR
002D FB                MOV     R3,A
002E A3                INC     DPTR
002F E0                MOVX    A,@DPTR
0030 FA                MOV     R2,A
0031 A3                INC     DPTR
0032 E0                MOVX    A,@DPTR
0033 F9                MOV     R1,A
0034 8F82              MOV     DPL,R7
0036 8E83              MOV     DPH,R6
0038 120000      E     LCALL   ?C?CLDOPTR
003B F599              MOV     SBUF,A
003D         ?C0065:
                                           ; SOURCE LINE # 219
003D 3099FD            JNB     TI,?C0065
                                           ; SOURCE LINE # 220
0040 C299              CLR     TI
                                           ; SOURCE LINE # 221
0042         ?C0064:
                                           ; SOURCE LINE # 223
0042 900000      R     MOV     DPTR,#nComPortIndex
0045 E0                MOVX    A,@DPTR
0046 FD                MOV     R5,A
0047 33                RLC     A
0048 95E0              SUBB    A,ACC
004A FC                MOV     R4,A
004B ED                MOV     A,R5
004C 6401              XRL     A,#01H
004E 4C                ORL     A,R4
004F 701D              JNZ     ?C0063
                                           ; SOURCE LINE # 224
0051 A3                INC     DPTR
0052 E0                MOVX    A,@DPTR
0053 FB                MOV     R3,A
0054 A3                INC     DPTR
0055 E0                MOVX    A,@DPTR
0056 FA                MOV     R2,A
0057 A3                INC     DPTR
0058 E0                MOVX    A,@DPTR
0059 F9                MOV     R1,A
005A 8F82              MOV     DPL,R7
005C 8E83              MOV     DPH,R6
005E 120000      E     LCALL   ?C?CLDOPTR
0061 F59B              MOV     S2BUF,A
0063         ?C0068:
                                           ; SOURCE LINE # 225
0063 E59A              MOV     A,S2CON
0065 5402              ANL     A,#02H
0067 6402              XRL     A,#02H
0069 70F8              JNZ     ?C0068
                                           ; SOURCE LINE # 226
006B 539AFD            ANL     S2CON,#0FDH
                                           ; SOURCE LINE # 227
                                           ; SOURCE LINE # 228
006E         ?C0063:
006E 0F                INC     R7
006F EF                MOV     A,R7
0070 7001              JNZ     ?C0124
0072 0E                INC     R6
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 26  

0073         ?C0124:
0073 809C              SJMP    ?C0061
                                           ; SOURCE LINE # 229
0075         ?C0070:
0075 22                RET     
             ; FUNCTION _SendData (END)

             ; FUNCTION _SendTC18B20PackageTypeToBoard (BEGIN)
                                           ; SOURCE LINE # 239
0000 900000      R     MOV     DPTR,#nTrimingBoardIndex
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 ED                MOV     A,R5
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 240
                                           ; SOURCE LINE # 243
0008 7E00              MOV     R6,#00H
000A 7F14              MOV     R7,#014H
000C 7D00              MOV     R5,#00H
000E 7B01              MOV     R3,#01H
0010 7A00        R     MOV     R2,#HIGH nPkgData
0012 7900        R     MOV     R1,#LOW nPkgData
0014 120000      E     LCALL   ?C?MEMSET
                                           ; SOURCE LINE # 244
0017 7B01              MOV     R3,#01H
0019 7A00        R     MOV     R2,#HIGH nPkgData
001B 7900        R     MOV     R1,#LOW nPkgData
001D 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
0020 74FF              MOV     A,#0FFH
0022 F0                MOVX    @DPTR,A
0023 A3                INC     DPTR
0024 7400        R     MOV     A,#HIGH ?SC_8
0026 F0                MOVX    @DPTR,A
0027 A3                INC     DPTR
0028 7400        R     MOV     A,#LOW ?SC_8
002A F0                MOVX    @DPTR,A
002B 900000      R     MOV     DPTR,#nPkgType
002E E0                MOVX    A,@DPTR
002F FE                MOV     R6,A
0030 33                RLC     A
0031 95E0              SUBB    A,ACC
0033 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0036 F0                MOVX    @DPTR,A
0037 A3                INC     DPTR
0038 CE                XCH     A,R6
0039 F0                MOVX    @DPTR,A
003A 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 245
003D E4                CLR     A
003E 900000      R     MOV     DPTR,#nDeviceIndex
0041 F0                MOVX    @DPTR,A
0042         ?C0071:
0042 900000      R     MOV     DPTR,#nDeviceIndex
0045 E0                MOVX    A,@DPTR
0046 FF                MOV     R7,A
0047 33                RLC     A
0048 95E0              SUBB    A,ACC
004A FE                MOV     R6,A
004B C3                CLR     C
004C EF                MOV     A,R7
004D 9408              SUBB    A,#08H
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 27  

004F EE                MOV     A,R6
0050 6480              XRL     A,#080H
0052 9480              SUBB    A,#080H
0054 5047              JNC     ?C0075
                                           ; SOURCE LINE # 246
0056 E0                MOVX    A,@DPTR
0057 33                RLC     A
0058 95E0              SUBB    A,ACC
005A FE                MOV     R6,A
005B 7400        E     MOV     A,#LOW nBoardIsHerePwr
005D 2F                ADD     A,R7
005E F582              MOV     DPL,A
0060 7400        E     MOV     A,#HIGH nBoardIsHerePwr
0062 3E                ADDC    A,R6
0063 F583              MOV     DPH,A
0065 E0                MOVX    A,@DPTR
0066 FF                MOV     R7,A
0067 900000      R     MOV     DPTR,#nTrimingBoardIndex
006A E0                MOVX    A,@DPTR
006B 5F                ANL     A,R7
006C 6027              JZ      ?C0073
                                           ; SOURCE LINE # 247
006E 900000      R     MOV     DPTR,#nDeviceIndex
0071 E0                MOVX    A,@DPTR
0072 FF                MOV     R7,A
0073 33                RLC     A
0074 95E0              SUBB    A,ACC
0076 FE                MOV     R6,A
0077 7400        R     MOV     A,#LOW nTestBoardName
0079 2F                ADD     A,R7
007A F582              MOV     DPL,A
007C 7400        R     MOV     A,#HIGH nTestBoardName
007E 3E                ADDC    A,R6
007F F583              MOV     DPH,A
0081 E0                MOVX    A,@DPTR
0082 FD                MOV     R5,A
0083 7B07              MOV     R3,#07H
0085 7F03              MOV     R7,#03H
0087 120000      R     LCALL   _SetUsartTwoPosionAndBtr
                                           ; SOURCE LINE # 248
008A 7B01              MOV     R3,#01H
008C 7A00        R     MOV     R2,#HIGH nPkgData
008E 7900        R     MOV     R1,#LOW nPkgData
0090 7F01              MOV     R7,#01H
0092 120000      R     LCALL   _SendStringData
                                           ; SOURCE LINE # 249
                                           ; SOURCE LINE # 250
0095         ?C0073:
0095 900000      R     MOV     DPTR,#nDeviceIndex
0098 E0                MOVX    A,@DPTR
0099 04                INC     A
009A F0                MOVX    @DPTR,A
009B 80A5              SJMP    ?C0071
                                           ; SOURCE LINE # 251
009D         ?C0075:
009D 22                RET     
             ; FUNCTION _SendTC18B20PackageTypeToBoard (END)

             ; FUNCTION _WaitForTrimingProcess (BEGIN)
                                           ; SOURCE LINE # 260
0000 900000      R     MOV     DPTR,#nTrimingBoardIndex
0003 EF                MOV     A,R7
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 28  

0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 261
                                           ; SOURCE LINE # 262
0005 E4                CLR     A
0006 900000      R     MOV     DPTR,#nDeviceIndex
0009 F0                MOVX    @DPTR,A
000A         ?C0076:
000A 900000      R     MOV     DPTR,#nDeviceIndex
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F 33                RLC     A
0010 95E0              SUBB    A,ACC
0012 FE                MOV     R6,A
0013 C3                CLR     C
0014 EF                MOV     A,R7
0015 9408              SUBB    A,#08H
0017 EE                MOV     A,R6
0018 6480              XRL     A,#080H
001A 9480              SUBB    A,#080H
001C 505E              JNC     ?C0086
                                           ; SOURCE LINE # 263
001E E0                MOVX    A,@DPTR
001F 33                RLC     A
0020 95E0              SUBB    A,ACC
0022 FE                MOV     R6,A
0023 7400        E     MOV     A,#LOW nBoardIsHerePwr
0025 2F                ADD     A,R7
0026 F582              MOV     DPL,A
0028 7400        E     MOV     A,#HIGH nBoardIsHerePwr
002A 3E                ADDC    A,R6
002B F583              MOV     DPH,A
002D E0                MOVX    A,@DPTR
002E FF                MOV     R7,A
002F 900000      R     MOV     DPTR,#nTrimingBoardIndex
0032 E0                MOVX    A,@DPTR
0033 5F                ANL     A,R7
0034 603E              JZ      ?C0078
                                           ; SOURCE LINE # 264
0036 900000      R     MOV     DPTR,#nDeviceIndex
0039 E0                MOVX    A,@DPTR
003A FF                MOV     R7,A
003B 33                RLC     A
003C 95E0              SUBB    A,ACC
003E FE                MOV     R6,A
003F 7400        R     MOV     A,#LOW nTestBoardName
0041 2F                ADD     A,R7
0042 F582              MOV     DPL,A
0044 7400        R     MOV     A,#HIGH nTestBoardName
0046 3E                ADDC    A,R6
0047 F583              MOV     DPH,A
0049 E0                MOVX    A,@DPTR
004A FD                MOV     R5,A
004B 7B07              MOV     R3,#07H
004D 7F03              MOV     R7,#03H
004F 120000      R     LCALL   _SetUsartTwoPosionAndBtr
                                           ; SOURCE LINE # 265
0052 539AFE            ANL     S2CON,#0FEH
0055         ?C0080:
                                           ; SOURCE LINE # 266
                                           ; SOURCE LINE # 267
0055 759B25            MOV     S2BUF,#025H
0058         ?C0082:
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 29  

                                           ; SOURCE LINE # 268
0058 E59A              MOV     A,S2CON
005A 5402              ANL     A,#02H
005C 6402              XRL     A,#02H
005E 70F8              JNZ     ?C0082
                                           ; SOURCE LINE # 269
0060 539AFD            ANL     S2CON,#0FDH
                                           ; SOURCE LINE # 271
0063 E59A              MOV     A,S2CON
0065 30E0ED            JNB     ACC.0,?C0080
                                           ; SOURCE LINE # 272
0068 539AFE            ANL     S2CON,#0FEH
                                           ; SOURCE LINE # 273
006B E59B              MOV     A,S2BUF
006D B425E5            CJNE    A,#025H,?C0080
                                           ; SOURCE LINE # 274
0070 8002              SJMP    ?C0078
                                           ; SOURCE LINE # 275
                                           ; SOURCE LINE # 276
0072 80E1              SJMP    ?C0080
                                           ; SOURCE LINE # 277
                                           ; SOURCE LINE # 278
0074         ?C0078:
0074 900000      R     MOV     DPTR,#nDeviceIndex
0077 E0                MOVX    A,@DPTR
0078 04                INC     A
0079 F0                MOVX    @DPTR,A
007A 808E              SJMP    ?C0076
                                           ; SOURCE LINE # 279
007C         ?C0086:
007C 22                RET     
             ; FUNCTION _WaitForTrimingProcess (END)

             ; FUNCTION _ReadTemperatureDataFromTrimingBoard (BEGIN)
                                           ; SOURCE LINE # 289
0000 900000      R     MOV     DPTR,#nTrimingBoardIndex
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EB                MOV     A,R3
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 EA                MOV     A,R2
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C E9                MOV     A,R1
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 290
                                           ; SOURCE LINE # 293
000E E4                CLR     A
000F 900000      R     MOV     DPTR,#nRxDataCunt
0012 F0                MOVX    @DPTR,A
0013         ?C0087:
0013 900000      R     MOV     DPTR,#nRxDataCunt
0016 E0                MOVX    A,@DPTR
0017 FF                MOV     R7,A
0018 33                RLC     A
0019 95E0              SUBB    A,ACC
001B FE                MOV     R6,A
001C C3                CLR     C
001D EF                MOV     A,R7
001E 9430              SUBB    A,#030H
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 30  

0020 EE                MOV     A,R6
0021 6480              XRL     A,#080H
0023 9480              SUBB    A,#080H
0025 5029              JNC     ?C0088
                                           ; SOURCE LINE # 294
0027 E0                MOVX    A,@DPTR
0028 33                RLC     A
0029 95E0              SUBB    A,ACC
002B FE                MOV     R6,A
002C EF                MOV     A,R7
002D 25E0              ADD     A,ACC
002F FF                MOV     R7,A
0030 EE                MOV     A,R6
0031 33                RLC     A
0032 FE                MOV     R6,A
0033 900000      R     MOV     DPTR,#pData
0036 E0                MOVX    A,@DPTR
0037 FB                MOV     R3,A
0038 A3                INC     DPTR
0039 E0                MOVX    A,@DPTR
003A FA                MOV     R2,A
003B A3                INC     DPTR
003C E0                MOVX    A,@DPTR
003D F9                MOV     R1,A
003E 8F82              MOV     DPL,R7
0040 8E83              MOV     DPH,R6
0042 E4                CLR     A
0043 F5F0              MOV     B,A
0045 120000      E     LCALL   ?C?ISTOPTR
                                           ; SOURCE LINE # 295
0048 900000      R     MOV     DPTR,#nRxDataCunt
004B E0                MOVX    A,@DPTR
004C 04                INC     A
004D F0                MOVX    @DPTR,A
004E 80C3              SJMP    ?C0087
0050         ?C0088:
                                           ; SOURCE LINE # 297
0050 E4                CLR     A
0051 900000      R     MOV     DPTR,#nDeviceIndex
0054 F0                MOVX    @DPTR,A
0055         ?C0090:
0055 900000      R     MOV     DPTR,#nDeviceIndex
0058 E0                MOVX    A,@DPTR
0059 FF                MOV     R7,A
005A 33                RLC     A
005B 95E0              SUBB    A,ACC
005D FE                MOV     R6,A
005E C3                CLR     C
005F EF                MOV     A,R7
0060 9408              SUBB    A,#08H
0062 EE                MOV     A,R6
0063 6480              XRL     A,#080H
0065 9480              SUBB    A,#080H
0067 503E              JNC     ?C0091
                                           ; SOURCE LINE # 298
0069 E0                MOVX    A,@DPTR
006A 33                RLC     A
006B 95E0              SUBB    A,ACC
006D FE                MOV     R6,A
006E 7400        E     MOV     A,#LOW nBoardIsHerePwr
0070 2F                ADD     A,R7
0071 F582              MOV     DPL,A
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 31  

0073 7400        E     MOV     A,#HIGH nBoardIsHerePwr
0075 3E                ADDC    A,R6
0076 F583              MOV     DPH,A
0078 E0                MOVX    A,@DPTR
0079 FF                MOV     R7,A
007A 900000      R     MOV     DPTR,#nTrimingBoardIndex
007D E0                MOVX    A,@DPTR
007E 5F                ANL     A,R7
007F 601E              JZ      ?C0092
                                           ; SOURCE LINE # 299
0081 900000      R     MOV     DPTR,#nDeviceIndex
0084 E0                MOVX    A,@DPTR
0085 FF                MOV     R7,A
0086 33                RLC     A
0087 95E0              SUBB    A,ACC
0089 FE                MOV     R6,A
008A 7400        R     MOV     A,#LOW nTestBoardName
008C 2F                ADD     A,R7
008D F582              MOV     DPL,A
008F 7400        R     MOV     A,#HIGH nTestBoardName
0091 3E                ADDC    A,R6
0092 F583              MOV     DPH,A
0094 E0                MOVX    A,@DPTR
0095 FD                MOV     R5,A
0096 7B07              MOV     R3,#07H
0098 7F03              MOV     R7,#03H
009A 120000      R     LCALL   _SetUsartTwoPosionAndBtr
                                           ; SOURCE LINE # 300
009D 8008              SJMP    ?C0091
                                           ; SOURCE LINE # 301
                                           ; SOURCE LINE # 302
009F         ?C0092:
009F 900000      R     MOV     DPTR,#nDeviceIndex
00A2 E0                MOVX    A,@DPTR
00A3 04                INC     A
00A4 F0                MOVX    @DPTR,A
00A5 80AE              SJMP    ?C0090
00A7         ?C0091:
                                           ; SOURCE LINE # 304
00A7 E4                CLR     A
00A8 900000      R     MOV     DPTR,#nRxDataCunt
00AB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 305
00AC 539AFE            ANL     S2CON,#0FEH
00AF         ?C0094:
                                           ; SOURCE LINE # 306
                                           ; SOURCE LINE # 307
00AF 759B02            MOV     S2BUF,#02H
00B2         ?C0096:
                                           ; SOURCE LINE # 308
00B2 E59A              MOV     A,S2CON
00B4 5402              ANL     A,#02H
00B6 6402              XRL     A,#02H
00B8 70F8              JNZ     ?C0096
                                           ; SOURCE LINE # 309
00BA 539AFD            ANL     S2CON,#0FDH
                                           ; SOURCE LINE # 311
00BD E59A              MOV     A,S2CON
00BF 30E0ED            JNB     ACC.0,?C0094
                                           ; SOURCE LINE # 312
00C2 539AFE            ANL     S2CON,#0FEH
                                           ; SOURCE LINE # 314
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 32  

00C5 900000      R     MOV     DPTR,#nRxDataCunt
00C8 E0                MOVX    A,@DPTR
00C9 FF                MOV     R7,A
00CA 33                RLC     A
00CB 95E0              SUBB    A,ACC
00CD FE                MOV     R6,A
00CE 7400        R     MOV     A,#LOW nRecieveData
00D0 2F                ADD     A,R7
00D1 F582              MOV     DPL,A
00D3 7400        R     MOV     A,#HIGH nRecieveData
00D5 3E                ADDC    A,R6
00D6 F583              MOV     DPH,A
00D8 E59B              MOV     A,S2BUF
00DA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 315
00DB 900000      R     MOV     DPTR,#nRxDataCunt
00DE E0                MOVX    A,@DPTR
00DF 04                INC     A
00E0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 316
                                           ; SOURCE LINE # 317
                                           ; SOURCE LINE # 318
00E1         ?C0099:
                                           ; SOURCE LINE # 320
                                           ; SOURCE LINE # 321
00E1 E59A              MOV     A,S2CON
00E3 30E0FB            JNB     ACC.0,?C0099
                                           ; SOURCE LINE # 322
00E6 539AFE            ANL     S2CON,#0FEH
                                           ; SOURCE LINE # 323
00E9 900000      R     MOV     DPTR,#nRxDataCunt
00EC E0                MOVX    A,@DPTR
00ED FF                MOV     R7,A
00EE 33                RLC     A
00EF 95E0              SUBB    A,ACC
00F1 FE                MOV     R6,A
00F2 7400        R     MOV     A,#LOW nRecieveData
00F4 2F                ADD     A,R7
00F5 F582              MOV     DPL,A
00F7 7400        R     MOV     A,#HIGH nRecieveData
00F9 3E                ADDC    A,R6
00FA F583              MOV     DPH,A
00FC E59B              MOV     A,S2BUF
00FE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 324
00FF 900000      R     MOV     DPTR,#nRxDataCunt
0102 E0                MOVX    A,@DPTR
0103 04                INC     A
0104 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 325
0105 E0                MOVX    A,@DPTR
0106 FF                MOV     R7,A
0107 33                RLC     A
0108 95E0              SUBB    A,ACC
010A FE                MOV     R6,A
010B EF                MOV     A,R7
010C 6460              XRL     A,#060H
010E 4E                ORL     A,R6
010F 70D0              JNZ     ?C0099
                                           ; SOURCE LINE # 326
0111 8002              SJMP    ?C0100
                                           ; SOURCE LINE # 327
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 33  

                                           ; SOURCE LINE # 328
0113 80CC              SJMP    ?C0099
0115         ?C0100:
                                           ; SOURCE LINE # 330
0115 E4                CLR     A
0116 900000      R     MOV     DPTR,#nRxDataCunt
0119 F0                MOVX    @DPTR,A
011A         ?C0103:
011A 900000      R     MOV     DPTR,#nRxDataCunt
011D E0                MOVX    A,@DPTR
011E FF                MOV     R7,A
011F 33                RLC     A
0120 95E0              SUBB    A,ACC
0122 FE                MOV     R6,A
0123 C3                CLR     C
0124 EF                MOV     A,R7
0125 9460              SUBB    A,#060H
0127 EE                MOV     A,R6
0128 6480              XRL     A,#080H
012A 9480              SUBB    A,#080H
012C 4003              JC      $ + 5H
012E 020000      R     LJMP    ?C0106
                                           ; SOURCE LINE # 331
0131 E0                MOVX    A,@DPTR
0132 33                RLC     A
0133 95E0              SUBB    A,ACC
0135 FE                MOV     R6,A
0136 7400        R     MOV     A,#LOW nRecieveData
0138 2F                ADD     A,R7
0139 F582              MOV     DPL,A
013B 7400        R     MOV     A,#HIGH nRecieveData
013D 3E                ADDC    A,R6
013E F583              MOV     DPH,A
0140 E0                MOVX    A,@DPTR
0141 FE                MOV     R6,A
0142 33                RLC     A
0143 95E0              SUBB    A,ACC
0145 900000      R     MOV     DPTR,#nTemperatureData
0148 F0                MOVX    @DPTR,A
0149 A3                INC     DPTR
014A CE                XCH     A,R6
014B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 332
014C E0                MOVX    A,@DPTR
014D F8                MOV     R0,A
014E E4                CLR     A
014F F0                MOVX    @DPTR,A
0150 E8                MOV     A,R0
0151 900000      R     MOV     DPTR,#nTemperatureData
0154 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 333
0155 900000      R     MOV     DPTR,#nRxDataCunt
0158 E0                MOVX    A,@DPTR
0159 33                RLC     A
015A 95E0              SUBB    A,ACC
015C FE                MOV     R6,A
015D 7400        R     MOV     A,#LOW nRecieveData+01H
015F 2F                ADD     A,R7
0160 F582              MOV     DPL,A
0162 7400        R     MOV     A,#HIGH nRecieveData+01H
0164 3E                ADDC    A,R6
0165 F583              MOV     DPH,A
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 34  

0167 E0                MOVX    A,@DPTR
0168 FF                MOV     R7,A
0169 900000      R     MOV     DPTR,#nTemperatureData+01H
016C E0                MOVX    A,@DPTR
016D 2F                ADD     A,R7
016E F0                MOVX    @DPTR,A
016F 900000      R     MOV     DPTR,#nTemperatureData
0172 E0                MOVX    A,@DPTR
0173 3400              ADDC    A,#00H
0175 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 335
0176 E0                MOVX    A,@DPTR
0177 FC                MOV     R4,A
0178 A3                INC     DPTR
0179 E0                MOVX    A,@DPTR
017A FD                MOV     R5,A
017B 900000      R     MOV     DPTR,#nRxDataCunt
017E E0                MOVX    A,@DPTR
017F FF                MOV     R7,A
0180 A2E7              MOV     C,ACC.7
0182 13                RRC     A
0183 FF                MOV     R7,A
0184 33                RLC     A
0185 95E0              SUBB    A,ACC
0187 FE                MOV     R6,A
0188 EF                MOV     A,R7
0189 25E0              ADD     A,ACC
018B FF                MOV     R7,A
018C EE                MOV     A,R6
018D 33                RLC     A
018E FE                MOV     R6,A
018F 900000      R     MOV     DPTR,#pData
0192 E0                MOVX    A,@DPTR
0193 FB                MOV     R3,A
0194 A3                INC     DPTR
0195 E0                MOVX    A,@DPTR
0196 FA                MOV     R2,A
0197 A3                INC     DPTR
0198 E0                MOVX    A,@DPTR
0199 F9                MOV     R1,A
019A 8F82              MOV     DPL,R7
019C 8E83              MOV     DPH,R6
019E EC                MOV     A,R4
019F 8DF0              MOV     B,R5
01A1 120000      E     LCALL   ?C?ISTOPTR
                                           ; SOURCE LINE # 336
01A4 900000      R     MOV     DPTR,#nRxDataCunt
01A7 E0                MOVX    A,@DPTR
01A8 2402              ADD     A,#02H
01AA F0                MOVX    @DPTR,A
01AB 020000      R     LJMP    ?C0103
                                           ; SOURCE LINE # 337
01AE         ?C0106:
01AE 22                RET     
             ; FUNCTION _ReadTemperatureDataFromTrimingBoard (END)

             ; FUNCTION _SendPt100DataToTrimingBoard (BEGIN)
                                           ; SOURCE LINE # 347
0000 900000      R     MOV     DPTR,#nTrimingBoardIndex
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 35  

0006 EB                MOV     A,R3
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 EA                MOV     A,R2
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C E9                MOV     A,R1
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 348
                                           ; SOURCE LINE # 349
000E 7B01              MOV     R3,#01H
0010 7A00        R     MOV     R2,#HIGH nRecieveData
0012 7900        R     MOV     R1,#LOW nRecieveData
0014 C003              PUSH    AR3
0016 C002              PUSH    AR2
0018 C001              PUSH    AR1
001A 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
001D 74FF              MOV     A,#0FFH
001F F0                MOVX    @DPTR,A
0020 A3                INC     DPTR
0021 7400        R     MOV     A,#HIGH ?SC_16
0023 F0                MOVX    @DPTR,A
0024 A3                INC     DPTR
0025 7400        R     MOV     A,#LOW ?SC_16
0027 F0                MOVX    @DPTR,A
0028 900000      R     MOV     DPTR,#pData
002B E0                MOVX    A,@DPTR
002C FB                MOV     R3,A
002D A3                INC     DPTR
002E E0                MOVX    A,@DPTR
002F FA                MOV     R2,A
0030 A3                INC     DPTR
0031 E0                MOVX    A,@DPTR
0032 F9                MOV     R1,A
0033 120000      E     LCALL   ?C?LLDPTR
0036 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0039 120000      E     LCALL   ?C?LSTXDATA
003C 900000      R     MOV     DPTR,#pData
003F E0                MOVX    A,@DPTR
0040 FB                MOV     R3,A
0041 A3                INC     DPTR
0042 E0                MOVX    A,@DPTR
0043 FA                MOV     R2,A
0044 A3                INC     DPTR
0045 E0                MOVX    A,@DPTR
0046 F9                MOV     R1,A
0047 900004            MOV     DPTR,#04H
004A 120000      E     LCALL   ?C?LLDOPTR
004D 900000      E     MOV     DPTR,#?_sprintf?BYTE+0AH
0050 120000      E     LCALL   ?C?LSTXDATA
0053 900000      R     MOV     DPTR,#pData
0056 E0                MOVX    A,@DPTR
0057 FB                MOV     R3,A
0058 A3                INC     DPTR
0059 E0                MOVX    A,@DPTR
005A FA                MOV     R2,A
005B A3                INC     DPTR
005C E0                MOVX    A,@DPTR
005D F9                MOV     R1,A
005E 900008            MOV     DPTR,#08H
0061 120000      E     LCALL   ?C?LLDOPTR
0064 900000      E     MOV     DPTR,#?_sprintf?BYTE+0EH
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 36  

0067 120000      E     LCALL   ?C?LSTXDATA
006A 900000      R     MOV     DPTR,#pData
006D E0                MOVX    A,@DPTR
006E FB                MOV     R3,A
006F A3                INC     DPTR
0070 E0                MOVX    A,@DPTR
0071 FA                MOV     R2,A
0072 A3                INC     DPTR
0073 E0                MOVX    A,@DPTR
0074 F9                MOV     R1,A
0075 90000C            MOV     DPTR,#0CH
0078 120000      E     LCALL   ?C?LLDOPTR
007B 900000      E     MOV     DPTR,#?_sprintf?BYTE+012H
007E 120000      E     LCALL   ?C?LSTXDATA
0081 D001              POP     AR1
0083 D002              POP     AR2
0085 D003              POP     AR3
0087 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 350
008A E4                CLR     A
008B 900000      R     MOV     DPTR,#nDeviceIndex
008E F0                MOVX    @DPTR,A
008F         ?C0107:
008F 900000      R     MOV     DPTR,#nDeviceIndex
0092 E0                MOVX    A,@DPTR
0093 FF                MOV     R7,A
0094 33                RLC     A
0095 95E0              SUBB    A,ACC
0097 FE                MOV     R6,A
0098 C3                CLR     C
0099 EF                MOV     A,R7
009A 9408              SUBB    A,#08H
009C EE                MOV     A,R6
009D 6480              XRL     A,#080H
009F 9480              SUBB    A,#080H
00A1 503C              JNC     ?C0108
                                           ; SOURCE LINE # 351
00A3 E0                MOVX    A,@DPTR
00A4 33                RLC     A
00A5 95E0              SUBB    A,ACC
00A7 FE                MOV     R6,A
00A8 7400        E     MOV     A,#LOW nBoardIsHerePwr
00AA 2F                ADD     A,R7
00AB F582              MOV     DPL,A
00AD 7400        E     MOV     A,#HIGH nBoardIsHerePwr
00AF 3E                ADDC    A,R6
00B0 F583              MOV     DPH,A
00B2 E0                MOVX    A,@DPTR
00B3 FF                MOV     R7,A
00B4 900000      R     MOV     DPTR,#nTrimingBoardIndex
00B7 E0                MOVX    A,@DPTR
00B8 5F                ANL     A,R7
00B9 601C              JZ      ?C0109
                                           ; SOURCE LINE # 352
00BB 900000      R     MOV     DPTR,#nDeviceIndex
00BE E0                MOVX    A,@DPTR
00BF FF                MOV     R7,A
00C0 33                RLC     A
00C1 95E0              SUBB    A,ACC
00C3 FE                MOV     R6,A
00C4 7400        R     MOV     A,#LOW nTestBoardName
00C6 2F                ADD     A,R7
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 37  

00C7 F582              MOV     DPL,A
00C9 7400        R     MOV     A,#HIGH nTestBoardName
00CB 3E                ADDC    A,R6
00CC F583              MOV     DPH,A
00CE E0                MOVX    A,@DPTR
00CF FD                MOV     R5,A
00D0 7B07              MOV     R3,#07H
00D2 7F03              MOV     R7,#03H
00D4 120000      R     LCALL   _SetUsartTwoPosionAndBtr
                                           ; SOURCE LINE # 353
                                           ; SOURCE LINE # 354
00D7         ?C0109:
00D7 900000      R     MOV     DPTR,#nDeviceIndex
00DA E0                MOVX    A,@DPTR
00DB 04                INC     A
00DC F0                MOVX    @DPTR,A
00DD 80B0              SJMP    ?C0107
00DF         ?C0108:
                                           ; SOURCE LINE # 356
00DF 7B01              MOV     R3,#01H
00E1 7A00        R     MOV     R2,#HIGH nRecieveData
00E3 7900        R     MOV     R1,#LOW nRecieveData
00E5 7F01              MOV     R7,#01H
00E7 120000      R     LCALL   _SendStringData
                                           ; SOURCE LINE # 357
00EA 22                RET     
             ; FUNCTION _SendPt100DataToTrimingBoard (END)

             ; FUNCTION _SendTrimmingVBEandRotationValues (BEGIN)
                                           ; SOURCE LINE # 358
0000 900000      R     MOV     DPTR,#nTrimingBoardIndex
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EB                MOV     A,R3
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 EA                MOV     A,R2
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C E9                MOV     A,R1
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 359
                                           ; SOURCE LINE # 362
000E 7E00              MOV     R6,#00H
0010 7F32              MOV     R7,#032H
0012 7D00              MOV     R5,#00H
0014 7B01              MOV     R3,#01H
0016 7A00        R     MOV     R2,#HIGH nVBEData
0018 7900        R     MOV     R1,#LOW nVBEData
001A 120000      E     LCALL   ?C?MEMSET
                                           ; SOURCE LINE # 363
001D 900000      E     MOV     DPTR,#Version
0020 E0                MOVX    A,@DPTR
0021 6401              XRL     A,#01H
0023 7055              JNZ     ?C0112
                                           ; SOURCE LINE # 364
0025 7B01              MOV     R3,#01H
0027 7A00        R     MOV     R2,#HIGH nVBEData
0029 7900        R     MOV     R1,#LOW nVBEData
002B C003              PUSH    AR3
002D C002              PUSH    AR2
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 38  

002F C001              PUSH    AR1
0031 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
0034 74FF              MOV     A,#0FFH
0036 F0                MOVX    @DPTR,A
0037 A3                INC     DPTR
0038 7400        R     MOV     A,#HIGH ?SC_40
003A F0                MOVX    @DPTR,A
003B A3                INC     DPTR
003C 7400        R     MOV     A,#LOW ?SC_40
003E F0                MOVX    @DPTR,A
003F 900000      R     MOV     DPTR,#pData
0042 E0                MOVX    A,@DPTR
0043 FB                MOV     R3,A
0044 A3                INC     DPTR
0045 E0                MOVX    A,@DPTR
0046 FA                MOV     R2,A
0047 A3                INC     DPTR
0048 E0                MOVX    A,@DPTR
0049 F9                MOV     R1,A
004A 120000      E     LCALL   ?C?ILDPTR
004D FF                MOV     R7,A
004E 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0051 E5F0              MOV     A,B
0053 F0                MOVX    @DPTR,A
0054 A3                INC     DPTR
0055 EF                MOV     A,R7
0056 F0                MOVX    @DPTR,A
0057 900000      R     MOV     DPTR,#pData
005A E0                MOVX    A,@DPTR
005B A3                INC     DPTR
005C E0                MOVX    A,@DPTR
005D A3                INC     DPTR
005E E0                MOVX    A,@DPTR
005F 900002            MOV     DPTR,#02H
0062 120000      E     LCALL   ?C?ILDOPTR
0065 FF                MOV     R7,A
0066 900000      E     MOV     DPTR,#?_sprintf?BYTE+08H
0069 E5F0              MOV     A,B
006B F0                MOVX    @DPTR,A
006C A3                INC     DPTR
006D EF                MOV     A,R7
006E F0                MOVX    @DPTR,A
006F D001              POP     AR1
0071 D002              POP     AR2
0073 D003              POP     AR3
0075 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 365
0078 805B              SJMP    ?C0113
007A         ?C0112:
                                           ; SOURCE LINE # 366
007A 900000      E     MOV     DPTR,#Version
007D E0                MOVX    A,@DPTR
007E 6402              XRL     A,#02H
0080 7053              JNZ     ?C0113
                                           ; SOURCE LINE # 367
0082 7B01              MOV     R3,#01H
0084 7A00        R     MOV     R2,#HIGH nVBEData
0086 7900        R     MOV     R1,#LOW nVBEData
0088 C003              PUSH    AR3
008A C002              PUSH    AR2
008C C001              PUSH    AR1
008E 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 39  

0091 74FF              MOV     A,#0FFH
0093 F0                MOVX    @DPTR,A
0094 A3                INC     DPTR
0095 7400        R     MOV     A,#HIGH ?SC_49
0097 F0                MOVX    @DPTR,A
0098 A3                INC     DPTR
0099 7400        R     MOV     A,#LOW ?SC_49
009B F0                MOVX    @DPTR,A
009C 900000      R     MOV     DPTR,#pData
009F E0                MOVX    A,@DPTR
00A0 FB                MOV     R3,A
00A1 A3                INC     DPTR
00A2 E0                MOVX    A,@DPTR
00A3 FA                MOV     R2,A
00A4 A3                INC     DPTR
00A5 E0                MOVX    A,@DPTR
00A6 F9                MOV     R1,A
00A7 120000      E     LCALL   ?C?ILDPTR
00AA FF                MOV     R7,A
00AB 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
00AE E5F0              MOV     A,B
00B0 F0                MOVX    @DPTR,A
00B1 A3                INC     DPTR
00B2 EF                MOV     A,R7
00B3 F0                MOVX    @DPTR,A
00B4 900000      R     MOV     DPTR,#pData
00B7 E0                MOVX    A,@DPTR
00B8 A3                INC     DPTR
00B9 E0                MOVX    A,@DPTR
00BA A3                INC     DPTR
00BB E0                MOVX    A,@DPTR
00BC 900002            MOV     DPTR,#02H
00BF 120000      E     LCALL   ?C?ILDOPTR
00C2 FF                MOV     R7,A
00C3 900000      E     MOV     DPTR,#?_sprintf?BYTE+08H
00C6 E5F0              MOV     A,B
00C8 F0                MOVX    @DPTR,A
00C9 A3                INC     DPTR
00CA EF                MOV     A,R7
00CB F0                MOVX    @DPTR,A
00CC D001              POP     AR1
00CE D002              POP     AR2
00D0 D003              POP     AR3
00D2 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 368
00D5         ?C0113:
                                           ; SOURCE LINE # 369
00D5 E4                CLR     A
00D6 900000      R     MOV     DPTR,#nDeviceIndex
00D9 F0                MOVX    @DPTR,A
00DA         ?C0115:
00DA 900000      R     MOV     DPTR,#nDeviceIndex
00DD E0                MOVX    A,@DPTR
00DE FF                MOV     R7,A
00DF 33                RLC     A
00E0 95E0              SUBB    A,ACC
00E2 FE                MOV     R6,A
00E3 C3                CLR     C
00E4 EF                MOV     A,R7
00E5 9408              SUBB    A,#08H
00E7 EE                MOV     A,R6
00E8 6480              XRL     A,#080H
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 40  

00EA 9480              SUBB    A,#080H
00EC 5047              JNC     ?C0119
                                           ; SOURCE LINE # 370
00EE E0                MOVX    A,@DPTR
00EF 33                RLC     A
00F0 95E0              SUBB    A,ACC
00F2 FE                MOV     R6,A
00F3 7400        E     MOV     A,#LOW nBoardIsHerePwr
00F5 2F                ADD     A,R7
00F6 F582              MOV     DPL,A
00F8 7400        E     MOV     A,#HIGH nBoardIsHerePwr
00FA 3E                ADDC    A,R6
00FB F583              MOV     DPH,A
00FD E0                MOVX    A,@DPTR
00FE FF                MOV     R7,A
00FF 900000      R     MOV     DPTR,#nTrimingBoardIndex
0102 E0                MOVX    A,@DPTR
0103 5F                ANL     A,R7
0104 6027              JZ      ?C0117
                                           ; SOURCE LINE # 371
0106 900000      R     MOV     DPTR,#nDeviceIndex
0109 E0                MOVX    A,@DPTR
010A FF                MOV     R7,A
010B 33                RLC     A
010C 95E0              SUBB    A,ACC
010E FE                MOV     R6,A
010F 7400        R     MOV     A,#LOW nTestBoardName
0111 2F                ADD     A,R7
0112 F582              MOV     DPL,A
0114 7400        R     MOV     A,#HIGH nTestBoardName
0116 3E                ADDC    A,R6
0117 F583              MOV     DPH,A
0119 E0                MOVX    A,@DPTR
011A FD                MOV     R5,A
011B 7B07              MOV     R3,#07H
011D 7F03              MOV     R7,#03H
011F 120000      R     LCALL   _SetUsartTwoPosionAndBtr
                                           ; SOURCE LINE # 372
0122 7B01              MOV     R3,#01H
0124 7A00        R     MOV     R2,#HIGH nVBEData
0126 7900        R     MOV     R1,#LOW nVBEData
0128 7F01              MOV     R7,#01H
012A 120000      R     LCALL   _SendStringData
                                           ; SOURCE LINE # 373
                                           ; SOURCE LINE # 374
012D         ?C0117:
012D 900000      R     MOV     DPTR,#nDeviceIndex
0130 E0                MOVX    A,@DPTR
0131 04                INC     A
0132 F0                MOVX    @DPTR,A
0133 80A5              SJMP    ?C0115
                                           ; SOURCE LINE # 375
0135         ?C0119:
0135 22                RET     
             ; FUNCTION _SendTrimmingVBEandRotationValues (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2684    ----
   CONSTANT SIZE    =     58    ----
   XDATA SIZE       =    241     132
C51 COMPILER V9.60.0.0   DATATRANS                                                         05/06/2023 12:12:06 PAGE 41  

   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
